<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>D3dEngine: D3dEngine/DescriptorHeapManager.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">D3dEngine
   &#160;<span id="projectnumber">0.0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_descriptor_heap_manager_8cpp_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">DescriptorHeapManager.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_descriptor_heap_manager_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="stdafx_8h.html">stdafx.h</a>&quot;</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_descriptor_heap_manager_8h.html">DescriptorHeapManager.h</a>&quot;</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_device_resources_8h.html">DeviceResources.h</a>&quot;</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_direct_x_helper_8h.html">DirectXHelper.h</a>&quot;</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_command_list_manager_8h.html">CommandListManager.h</a>&quot;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * @brief Construct a new Descriptor Heap Manager:: Descriptor Heap Manager object</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *  the descriptor heap stores the descriptors of the resources used in heap which is used to get the resourc on rendering along with the root signature to give the GPU resources to render</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * @param numDescriptors the number of descriptors to be created</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * @param type the type of descriptor heap that is used</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * @param flags the flags to be used on creation</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * @param deviceResources </span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="class_descriptor_heap_manager.html#a0f9384d42ee90d6207e64b0b8f24123b">   15</a></span>&#160;<a class="code" href="class_descriptor_heap_manager.html#a0f9384d42ee90d6207e64b0b8f24123b">DescriptorHeapManager::DescriptorHeapManager</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> numDescriptors, D3D12_DESCRIPTOR_HEAP_TYPE type,</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    D3D12_DESCRIPTOR_HEAP_FLAGS flags, <span class="keyword">const</span> std::shared_ptr&lt;DX::DeviceResources&gt; deviceResources): m_type(type), m_deviceResources(deviceResources)</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;{</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    <span class="comment">// describes and creates the descriptor heap</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    <a class="code" href="class_descriptor_heap_manager.html#a09cfe4f8f94bb9d12b441132fb53a95e">m_desc</a> = D3D12_DESCRIPTOR_HEAP_DESC{};</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    <a class="code" href="class_descriptor_heap_manager.html#a09cfe4f8f94bb9d12b441132fb53a95e">m_desc</a>.NumDescriptors = numDescriptors;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <a class="code" href="class_descriptor_heap_manager.html#a09cfe4f8f94bb9d12b441132fb53a95e">m_desc</a>.Type = type;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <a class="code" href="class_descriptor_heap_manager.html#a09cfe4f8f94bb9d12b441132fb53a95e">m_desc</a>.Flags = flags;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <a class="code" href="_direct_x_helper_8h.html#abca3eeca6b5772a1112e0a9a9e3d9013">ThrowIfFailed</a>(<a class="code" href="class_descriptor_heap_manager.html#a6a5e1513f7c9b6ba048796882e16de01">m_deviceResources</a>-&gt;GetD3DDevice()-&gt;CreateDescriptorHeap(&amp;<a class="code" href="class_descriptor_heap_manager.html#a09cfe4f8f94bb9d12b441132fb53a95e">m_desc</a>, IID_PPV_ARGS(&amp;<a class="code" href="class_descriptor_heap_manager.html#a373ccb68b5f147346d24469f8b46e2f4">m_heap</a>)));</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <span class="comment">//NAME_D3D12_OBJECT(m_heap);</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;}<span class="comment"></span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * @brief Destroy the Descriptor Heap Manager:: Descriptor Heap Manager object</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> * </span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="class_descriptor_heap_manager.html#afb06cc02997f44f9e6d651d229358dd2">   30</a></span>&#160;<a class="code" href="class_descriptor_heap_manager.html#afb06cc02997f44f9e6d651d229358dd2">DescriptorHeapManager::~DescriptorHeapManager</a>()</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;{</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;}<span class="comment"></span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> * @brief renders each item added to the descriptor heap and root signature</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> * </span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> * @param count the number of both root signature indices and descriptor heasp indices</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> * @param rootSigIndex the indies from the root signature</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> * @param heapIndex the indices from the descriptor heap</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> * @param commandListManager </span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="class_descriptor_heap_manager.html#af5ad3ea476bd56e9f9b8d37e2c3a452d">   41</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_descriptor_heap_manager.html#af5ad3ea476bd56e9f9b8d37e2c3a452d">DescriptorHeapManager::Render</a>(UINT count, UINT* rootSigIndex, UINT* heapIndex, std::shared_ptr&lt;CommandListManager&gt; commandListManager)</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;{</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keyword">auto</span> size = this-&gt;<a class="code" href="class_descriptor_heap_manager.html#ac772aa7fc2f22d105a2ecd02367fc1b0">GetDescriptorSize</a>();</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; count; i++) {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <span class="keyword">const</span> CD3DX12_GPU_DESCRIPTOR_HANDLE gpuHandle(this-&gt;<a class="code" href="class_descriptor_heap_manager.html#a9d1ca4a074100e3ab22f28402fbaa377">GetGPUDescriptorHandleForHeapStart</a>(), heapIndex[i], size);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        commandListManager-&gt;SetGraphicsRootDescriptorTable(rootSigIndex[i], gpuHandle);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    }</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div><div class="ttc" id="class_descriptor_heap_manager_html_ac772aa7fc2f22d105a2ecd02367fc1b0"><div class="ttname"><a href="class_descriptor_heap_manager.html#ac772aa7fc2f22d105a2ecd02367fc1b0">DescriptorHeapManager::GetDescriptorSize</a></div><div class="ttdeci">D3DENGINE_API UINT GetDescriptorSize() const</div><div class="ttdef"><b>Definition:</b> <a href="_descriptor_heap_manager_8h_source.html#l00018">DescriptorHeapManager.h:18</a></div></div>
<div class="ttc" id="class_descriptor_heap_manager_html_a09cfe4f8f94bb9d12b441132fb53a95e"><div class="ttname"><a href="class_descriptor_heap_manager.html#a09cfe4f8f94bb9d12b441132fb53a95e">DescriptorHeapManager::m_desc</a></div><div class="ttdeci">D3D12_DESCRIPTOR_HEAP_DESC m_desc</div><div class="ttdef"><b>Definition:</b> <a href="_descriptor_heap_manager_8h_source.html#l00022">DescriptorHeapManager.h:22</a></div></div>
<div class="ttc" id="class_descriptor_heap_manager_html_a6a5e1513f7c9b6ba048796882e16de01"><div class="ttname"><a href="class_descriptor_heap_manager.html#a6a5e1513f7c9b6ba048796882e16de01">DescriptorHeapManager::m_deviceResources</a></div><div class="ttdeci">std::shared_ptr&lt; DX::DeviceResources &gt; m_deviceResources</div><div class="ttdoc">the type of the descriptor heap </div><div class="ttdef"><b>Definition:</b> <a href="_descriptor_heap_manager_8h_source.html#l00027">DescriptorHeapManager.h:27</a></div></div>
<div class="ttc" id="_descriptor_heap_manager_8h_html"><div class="ttname"><a href="_descriptor_heap_manager_8h.html">DescriptorHeapManager.h</a></div></div>
<div class="ttc" id="class_descriptor_heap_manager_html_afb06cc02997f44f9e6d651d229358dd2"><div class="ttname"><a href="class_descriptor_heap_manager.html#afb06cc02997f44f9e6d651d229358dd2">DescriptorHeapManager::~DescriptorHeapManager</a></div><div class="ttdeci">D3DENGINE_API ~DescriptorHeapManager()</div><div class="ttdoc">Destroy the Descriptor Heap Manager:: Descriptor Heap Manager object. </div><div class="ttdef"><b>Definition:</b> <a href="_descriptor_heap_manager_8cpp_source.html#l00030">DescriptorHeapManager.cpp:30</a></div></div>
<div class="ttc" id="class_descriptor_heap_manager_html_a9d1ca4a074100e3ab22f28402fbaa377"><div class="ttname"><a href="class_descriptor_heap_manager.html#a9d1ca4a074100e3ab22f28402fbaa377">DescriptorHeapManager::GetGPUDescriptorHandleForHeapStart</a></div><div class="ttdeci">D3DENGINE_API D3D12_GPU_DESCRIPTOR_HANDLE GetGPUDescriptorHandleForHeapStart() const</div><div class="ttdef"><b>Definition:</b> <a href="_descriptor_heap_manager_8h_source.html#l00021">DescriptorHeapManager.h:21</a></div></div>
<div class="ttc" id="_device_resources_8h_html"><div class="ttname"><a href="_device_resources_8h.html">DeviceResources.h</a></div></div>
<div class="ttc" id="class_descriptor_heap_manager_html_af5ad3ea476bd56e9f9b8d37e2c3a452d"><div class="ttname"><a href="class_descriptor_heap_manager.html#af5ad3ea476bd56e9f9b8d37e2c3a452d">DescriptorHeapManager::Render</a></div><div class="ttdeci">D3DENGINE_API void Render(UINT count, UINT *rootSigIndex, UINT *heapIndex, std::shared_ptr&lt; CommandListManager &gt; commandListManager)</div><div class="ttdoc">renders each item added to the descriptor heap and root signature </div><div class="ttdef"><b>Definition:</b> <a href="_descriptor_heap_manager_8cpp_source.html#l00041">DescriptorHeapManager.cpp:41</a></div></div>
<div class="ttc" id="stdafx_8h_html"><div class="ttname"><a href="stdafx_8h.html">stdafx.h</a></div></div>
<div class="ttc" id="_direct_x_helper_8h_html"><div class="ttname"><a href="_direct_x_helper_8h.html">DirectXHelper.h</a></div></div>
<div class="ttc" id="_direct_x_helper_8h_html_abca3eeca6b5772a1112e0a9a9e3d9013"><div class="ttname"><a href="_direct_x_helper_8h.html#abca3eeca6b5772a1112e0a9a9e3d9013">ThrowIfFailed</a></div><div class="ttdeci">D3DENGINE_API void ThrowIfFailed(HRESULT hr)</div><div class="ttdoc">throw exception if failed </div><div class="ttdef"><b>Definition:</b> <a href="_direct_x_helper_8h_source.html#l00020">DirectXHelper.h:20</a></div></div>
<div class="ttc" id="_command_list_manager_8h_html"><div class="ttname"><a href="_command_list_manager_8h.html">CommandListManager.h</a></div></div>
<div class="ttc" id="class_descriptor_heap_manager_html_a0f9384d42ee90d6207e64b0b8f24123b"><div class="ttname"><a href="class_descriptor_heap_manager.html#a0f9384d42ee90d6207e64b0b8f24123b">DescriptorHeapManager::DescriptorHeapManager</a></div><div class="ttdeci">D3DENGINE_API DescriptorHeapManager(const int numDescriptors, D3D12_DESCRIPTOR_HEAP_TYPE type, D3D12_DESCRIPTOR_HEAP_FLAGS flags, const std::shared_ptr&lt; DX::DeviceResources &gt; deviceResources)</div><div class="ttdoc">Construct a new Descriptor Heap Manager:: Descriptor Heap Manager object the descriptor heap stores t...</div><div class="ttdef"><b>Definition:</b> <a href="_descriptor_heap_manager_8cpp_source.html#l00015">DescriptorHeapManager.cpp:15</a></div></div>
<div class="ttc" id="class_descriptor_heap_manager_html_a373ccb68b5f147346d24469f8b46e2f4"><div class="ttname"><a href="class_descriptor_heap_manager.html#a373ccb68b5f147346d24469f8b46e2f4">DescriptorHeapManager::m_heap</a></div><div class="ttdeci">Microsoft::WRL::ComPtr&lt; ID3D12DescriptorHeap &gt; m_heap</div><div class="ttdoc">The descriptor for the heap. </div><div class="ttdef"><b>Definition:</b> <a href="_descriptor_heap_manager_8h_source.html#l00025">DescriptorHeapManager.h:25</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_9ab687171eb1b56f817ec0ea4e56170a.html">D3dEngine</a></li><li class="navelem"><a class="el" href="_descriptor_heap_manager_8cpp.html">DescriptorHeapManager.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
